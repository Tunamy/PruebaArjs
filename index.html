<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    
  </head>

  <body style="margin: 0; overflow: hidden;">
  <div id="mensaje"></div>
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
      <a-text

        value="This content will always face you."
        look-at="[gps-camera]"
        scale="70 70 70"
        gps-entity-place="latitude: 37.19219021640692; longitude: -3.6173989106522724;" 
        
      ></a-text>

     <!-- <a-assets>
    <img id="image" src="image.jpeg" gps-entity-place="latitude: 37.19219021640692; longitude: -3.6173989106522724;">
    </a-assets>-->
      

      <!-- <a-box material="color: yellow" gps-entity-place="latitude: 37.19219021640692; longitude: -3.6173989106522724"/>

      <a-entity gps-entity-place="latitude: 37.19203266750125; longitude: -3.6168726103983997;" gltf-model="./assets/magnemite/scene.gltf" rotation="0 180 0" animation-mixer scale="0.0005 0.0005 0.0005"/>
      <a-entity gps-entity-place="latitude: 37.191957879667974; longitude: -3.6167711418611743;" gltf-model="./assets/articuno/scene.gltf" rotation="0 180 0" animation-mixer scale="0.0005 0.0005 0.0005"/>
      <a-entity gps-entity-place="latitude: 37.19190273303553; longitude: -3.6169190772986872;" gltf-model="./assets/dragonite/scene.gltf" rotation="0 180 0" animation-mixer scale="0.0005 0.0005 0.0005"/>

      <a-box material="color: yellow" gps-entity-place="latitude: 37.19190273303553; longitude: -3.6169190772986872"/>  -->

      <a-camera id='camera1' look-controls-enabled='false' arjs-look-controls='smoothingFactor: 0.1' gps-camera='gpsMinDistance: 5' rotation-reader> </a-camera> 


    </a-scene>
  </body>
  <script src="modelos.js"></script>

  <script>
  window.onload = () => 
{

    let camara = document.querySelector('a-camera');
    camara.addEventListener('gps-camera-update-positon',()=>
    {
        let div = document.getElementById('mensaje');
        div.innerHTML = "prueba";
    }
    cargarModelos()     
};

function cargarModelos()
{
    let modelos = 
    [
        {
            latitud: 37.192249,
            longitud: -3.616615,
            color: "yellow",
            
        },

        {
             latitud: 37.192249,
             longitud: -3.616615,
             color: "yellow",
             
        },

        {
             latitud: 37.192249,
             longitud: -3.616615,
             color: "yellow",
             
        },
       
    ];
}
    
    //let latitud: 37.19219021640692,
    //let longitud: -3.6173989106522724,

    for(let i = 0; i<modelos.length; i++)
    {

        var model = document.createElement('a-box');

        model.setAttribute('material','color:'+modelos[i].color);

        model.setAttribute('scale', '0.2 0.2 0.2');

        model.setAttribute('gps-entity-place', `latitude: ${modelos[i].latitud}; longitude: ${modelos[i].longitude};`);

        let scene = document.querySelector('a-scene');
        scene.appendChild(model);
    }
}
  </script>
</html>